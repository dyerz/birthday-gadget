<?xml version="1.0" encoding="UTF-8"?>
<Module>
<ModulePrefs title="Never Forget" description="Never miss your friends' birthdays again!" author="Adam" >
    <Require feature="analytics" /> 
</ModulePrefs>
<UserPref name="max_add" default_value="5" datatype="hidden" /> 
<Content type="html"><![CDATA[
  <script>
    // Track this gadget using Google Analytics.
    _IG_Analytics("UA-310375-4", "/birthday-gadget");
  </script>

  <script type="text/javascript">
    var prefs = new _IG_Prefs(__MODULE_ID__);

    function remove__MODULE_ID__(num){
      thedate=_gel("setDate"+num+"__MODULE_ID__");
      thename=_gel("setName"+num+"__MODULE_ID__");
      thespan=_gel("setSpan"+num+"__MODULE_ID__");
      theform=_gel("setInfo__MODULE_ID__");
      thebr=thespan.nextSibling;
      theform.removeChild(thedate);
      theform.removeChild(thename);
      theform.removeChild(thespan);
      theform.removeChild(thebr);
      if(num>1) test=_gel("setDate"+(num-1)+"__MODULE_ID__");
      else test=theform.firstChild.nextSibling;
      test.onclick=function(){setVars__MODULE_ID__(num-1);}
      if(num-1>0) _gel("setSpan"+(num-1)+"__MODULE_ID__").style.display="";}
    
    function setVars__MODULE_ID__(num){
      theform=_gel("setInfo__MODULE_ID__");
      setLoc=theform.elements[num*2];
      setLoc.onclick="";
      
      
      if(setLoc.value=="YYYY/MM/DD"){
        setLoc.value="";}
      
      if(num<prefs.getInt("max_add")){
        thebutton=theform.lastChild;
        theform.removeChild(thebutton);
        if(num>0) _gel("setSpan"+(num)+"__MODULE_ID__").style.display="none";
        thebr=document.createElement("br");
        thex=document.createElement("span");
        thex.id="setSpan"+(num + 1)+"__MODULE_ID__";
        thex.innerHTML=" X ";
        thex.onclick=function(){remove__MODULE_ID__(num+1);};
        thespace=document.createTextNode(" ");
        theDate=document.createElement("input");
        theDate.setAttribute("value", "YYYY/MM/DD");
        theDate.setAttribute("id", "setDate"+(num + 1)+"__MODULE_ID__");
        theDate.setAttribute("name", "setDate"+(num + 1)+"__MODULE_ID__");
        theDate.setAttribute("size", "11");
        theDate.setAttribute("maxlength", "10");
        theDate.onclick=function(){setVars__MODULE_ID__(num+1);};
        theform.appendChild(theDate);
        theform.appendChild(thespace);
        theName=document.createElement("input");
        theName.setAttribute("id", "setName"+(num + 1)+"__MODULE_ID__");
        theName.setAttribute("name", "setName"+(num + 1)+"__MODULE_ID__");
        theform.appendChild(theName);
        theform.appendChild(thex);
        theform.appendChild(thebr);
        theform.appendChild(thebutton);
        
      }
    }


  </script>
  <div id="Nav__MODULE_ID__">
    <a onClick="view__MODULE_ID__(); return true;" href="#"><span id="sview__MODULE_ID__">view</span></a> |
    <a onClick="add__MODULE_ID__(); return true;" href="#"><span id="sedit__MODULE_ID__">add</span></a>
  </div>
  <div id="Entry__MODULE_ID__">
    <form name="setInfo__MODULE_ID__" id="setInfo__MODULE_ID__">
      <table style="margin: 0; padding: 0;"><tr><th>Birthday</th><th>Name</th></tr><tr>
      <td><input type="text" name="setDate0__MODULE_ID__" value="YYYY/MM/DD" size="11" maxlength="10" /></td>
      <td style="width: 100%"><input style="width: 100%" type="text" name="setName0__MODULE_ID__" /></td></tr>
      </table>
      <input type="button" name="setAdd__MODULE_ID__" value="Add" onClick="" /></form>
  </div>



]]></Content>
</Module>
